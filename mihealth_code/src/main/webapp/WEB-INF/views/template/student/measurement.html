<div class="pmb-block">
    <div class="pmbb-header">
        <h2><i class="zmdi zmdi-ruler m-r-5"></i> [(#{measurement})]</h2>

        <ul class="actions">
			<li>
				<a tooltip-placement="bottom" th:attr="uib-tooltip=#{refresh}" ng-click="reloadMeasurementData()">
                 	<i class="zmdi zmdi-refresh-alt"></i>
                 </a>
            </li>
		</ul>
    </div>
    <div class="pmbb-body p-l-0">
            <div class="table-responsive">
                <table ng-init="refresh()" ng-table="measurementTable" class="table table-striped table-vmiddle" show-filter="isFilterVisible">
                    <tr ng-repeat="w in $data"  ng-class="{ 'active': w.$edit }">
                        <td th:title="'\''+#{height}+'\''" class="text-center" header-class="'text-center'" sortable = "'properties.height'">
                            <span ng-if="!w.$edit">{{ w.properties.height }}</span>
                            <div ng-if="w.$edit"><input class="form-control" type="text" ng-model="w.properties.height" ng-change="tctrl.calcBmi(w)" /></div>
                        </td>
                        <td th:title="'\''+#{weight}+'\''" class="text-center" header-class="'text-center'" sortable = "'properties.weight'">
                            <span ng-if="!w.$edit">{{ w.properties.weight }}</span>
                            <div ng-if="w.$edit"><input class="form-control" type="text" ng-model="w.properties.weight" ng-change="tctrl.calcBmi(w)"/></div>
                        </td>
                        <td th:title="'\''+#{bmi}+'\''" class="text-center" header-class="'text-center'" sortable = "'properties.bmi'" >
                            {{ w.properties.bmi | number:1}} &nbsp; <i ng-if="w.properties.bmi >= 30" class="zmdi zmdi-mood-bad mdc-text-red"></i>
                        </td>
                        <td th:title="'\''+#{vision_grade}+'-'+#{left}+'\''" class="text-center" header-class="'text-center'" sortable = "'properties.leftEye'" >
                            <span ng-if="!w.$edit">{{ w.properties.leftEye }}</span>
                            <div ng-if="w.$edit"><input class="form-control" type="text" ng-model="w.properties.leftEye" /></div>
                        </td>
                        <td th:title="'\''+#{vision_grade}+'-'+#{right}+'\''" class="text-center" header-class="'text-center'" sortable = "'properties.rightEye'">
                            <span ng-if="!w.$edit">{{ w.properties.rightEye }}</span>
                            <div ng-if="w.$edit"><input class="form-control" type="text" ng-model="w.properties.rightEye" /></div>
                        </td>
                        <td th:title="'\''+#{registered_at}+'\''"  style="width:140px;" class="text-center" header-class="'text-center'" sortable = "'registeredAt'">
                            {{ tctrl.toDate(w.registeredAt)|date:'short'}}
                        </td>
                        <td style="width:105px;" class="text-center" >
							<div th:replace="fragment/table.html :: action"></div>
                        </td>
                    </tr>
                </table>
            </div>
    </div>
</div>